# Создание базы данных для магазина керамики 

Для анализа бизнес-процесса продажи керамических изделий были разработаны IDEF0, DFD, IDEF3 модели, построены UML диаграммы. Построена база данных на SQL, где хранится информация о товарах на складе, клиентской базе, информация о заказах, сотрудниках и доставке товара.

<details>
<summary> 1. Моделирование и анализ бизнесс-процесса. Создание IDEF0, DFD, IDEF3 диаграмм.</summary>

Магазин керамики специализируется на горшках и кашпо для растений, но так же предлагает горшки и капо из других материалов (для расширения бизнеса).

![IDEF0](/images/Ceramic_idef0.png)

*IDEF0. Контекстная диаграмма.*

Основной блок – Деятельность компании по 
изготовлению цветочных горшков.
Входной информацией системы является:
-	Заказы магазинов;
-	Поставка материалов.
Выходной информацией системы является:
-	Проданные партии
-	Маркетинговые материалы
Механизмы информацией системы является:
-	Бухгалтерия
Управляющие информацией системы является:
-	Нормы и правила

![DEC1](/images/Ceramic_decomposition.png)

*Декомпозиция контекстной диаграммы.*

Мы декомпозировали общий блок «Деятельность компании по изготовлению цветочных горшков» на связанные между собой элементы. В нашем случае делится на 3 основных этапа:
-	Продажи и маркетинг;
-	Изготовление горшков и тестирование на брак;
-	Отгрузка и продажа парий продуктов.

![DEC2](/images/Ceramic_decomposition_2.png)

Блок «Изготовление горшков и тестирование на брак» мы декомпозируем еще на 5 этапов:
-	Управление процессами изготовления и тестирования продукции;
-	Изготовление пластиковых горшков;
-	Лепка керамических и глиняных горшков;
-	Тестирование на наличие брака;
-	Создание документации.


![DFD](/images/Ceramic_dfd1.png)

*Модель DFD по предметной области «Создание документации».*

![DFD2](/images/Ceramic_dfd2.png)

*Декомпозиция блока «Оформление заказов»*

На данной модели отображается основной процесс (сама система в целом) и ее связи с внешней средой (внешними сущностями). Это взаимодействие показывается через потоки  данных.

**Внешние сущности** изображают входы в систему и/или выходы из нее. На декомпозиции внешние  сущности это клиенты

**Стрелки** (потоки данных). Стрелки описывают движение объектов из одной части системы в другую.

**Хранилище данных.** В отличие от стрелок, описывающих объекты в движении, хранилища данных изображают объекты в покое. На декомпозиции это база данных клиентов и база данных заказов.

![IDEF3](/images/Ceramic_idef3.png)

*Модель IDEF3 по предметной области «Изготовление пластиковых горшков»*

Методология IDEF3 позволяет декомпозировать работу многократно, т. е. работа может иметь множество дочерних работ. Возможность множественной декомпозиции отражается в нумерации работ: номер работы состоит из номера родительской работы, номера декомпозиции и номера работы на текущей диаграмме.

**Слабые связи переходов** изображаются сплошными одинарными стрелками.

**Сильные связи** переходов изображаются двойными однонаправленными стрелками

Для создания диаграмм использовался ERwin Process Modeler. Файл с моделями: [`Ceramic_model.erwin`](/Ceramic_model.bp1)

</details>

<details>
<summary> 2. Проектирование информационной системы на языке UML</summary>


*Use case diagram* (диаграммы прецедентов) - этот вид диаграмм позволяет создать список операций, которые выполняет система. Каждая такая диаграмма – это описание сценария поведения, которому следуют действующие лица (Actors).

![use-case](/images/Ceramic_use_case.png)

*Диаграмма вариантов использования*

На данной диаграмме мы отобразили организацию заказа клиентом цветочных горшков. Клиент заключает договор с производителем, передает определенные требования. Производитель занимается производством и управлением заказами.

![sequence](/images/Ceramic_Sequence.png)

*Sequence diagram* позволяет отразить последовательность передачи сообщений между объектами. 

На диаграмме показан последовательность действий от клиента до подтверждения заказа на партию цветочных горшков при заказе партии онлайн.

![collaboration](/images/Ceramic_Collaboration.png)

*Collaboration diagram* позволяет описать взаимодействия объектов, абстрагируясь от
последовательности передачи сообщений. 

По причине того, что диаграммы Sequence и Collaboration являются разными взглядами на одни и те же процессы, Rational Rose позволяет создавать из Sequence диаграммы диаграмму Collaboration и наоборот, а также производит автоматическую синхронизацию этих диаграмм.

![state](/images/Ceramic_state.png)

*Диаграмма состояний* предназначена для отображения состояний объектов системы, имеющих сложную модель поведения. Диаграмма содержит в себе state (суперсостояние), состояния, state transition (переходы), начальное (Start state) и конечное состояние (End State).

![activity](/images/Ceramic_activity.png)

*Activity diagram* (диаграммы активности). Это дальнейшее развитие диаграммы состояний. Фактически данный тип диаграмм может использоваться и для отражения состояний моделируемого объекта, однако, основное назначение Activity diagram в том, чтобы отражать бизнес-процессы объекта. На диаграмме присутствуют дорожки (Swimlane), объекты состояния(Activity), начальное (Start state) и конечное состояние (End State).

![class](/images/Ceramic_class.png)

На данном этапе создается уже готовая *диаграмма классов*, а именно добавляются новые атрибуты и операции к классу. Происходит подробное описание операций и атрибутов, а именно указываются их типы.
В данной работе используется 4 вида стереотипов: Исполнитель (Actor), граница(boundary), сущность(entity) и управление (control).

![component](/images/Ceramic_component_2.png)

*Component diagram* (диаграммы компонентов). Этот тип диаграмм предназначен для распределения классов и объектов по компонентам при физическом проектировании системы. Диаграмма компонентов, в отличие от ранее рассмотренных диаграмм, описывает особенности физического представления системы. Пунктирные стрелки, соединяющие модули, показывают отношения взаимозависимости.
 
Основными графическими элементами диаграммы компонентов являются компоненты, интерфейсы и зависимости между ними.

![deployment](/images/Ceramic_Deploymen.png)

*Диаграмма развертывания*



</details>

<details>
<summary> 3. Создание Базы Данных SQL</summary>

![Модель БД](/images/Ceranic_SQL_Workbench.JPG)

Файл БД MySQL Workbench: [`Ceramic_DataBase.mwb`](/Ceramic_DataBase.mwb)

Текст SQL был скопирован в файл [`Ceramic_Sql_Text.txt`](/Ceramic_Sql_Text.txt)
Ниже преведены фрагменты:

**Создание Таблицы сотрудников**
```
CREATE TABLE IF NOT EXISTS `mydb`.`Сотрудник` (
  `Идентификатор Сотрудника` INT NOT NULL AUTO_INCREMENT,
  `Фамилия` VARCHAR(50) NOT NULL,
  `Имя` VARCHAR(50) NOT NULL,
  `Отчество` VARCHAR(50) NULL,
  `Дата Рождения` VARCHAR(50) NOT NULL,
  `Данные паспорта` VARCHAR(100) NOT NULL,
  `Идентификатор отдела` INT NOT NULL,
  `Рабочий телефон` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Идентификатор Сотрудника`),
  UNIQUE INDEX `idEmployee_UNIQUE` (`Идентификатор Сотрудника` ASC) VISIBLE,
  UNIQUE INDEX `Passport_UNIQUE` (`Данные паспорта` ASC) VISIBLE)
ENGINE = InnoDB;
```
**Создание таблицы с ячейккми склада**
```
DROP TABLE IF EXISTS `mydb`.`Склад` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Склад` (
  `Идентификатор ячейки товара на складе` INT NOT NULL,
  `Количество товара` INT NULL,
  PRIMARY KEY (`Идентификатор ячейки товара на складе`))
ENGINE = InnoDB;
```
**Создание таблицы моделей горшков**
```
CREATE TABLE IF NOT EXISTS `mydb`.`Горшок` (
  `Идентификатор модели горшка` INT NOT NULL,
  `Идентификатор ячейки товара на складе` INT NOT NULL,
  `Наименование модели горшка` VARCHAR(100) NULL,
  `Материал` VARCHAR(45) NULL,
  `Цвет` VARCHAR(45) NULL,
  `Рисунок` VARCHAR(45) NULL,
  `Форма` VARCHAR(45) NULL,
  `Объём` VARCHAR(45) NULL,
  `Высота` VARCHAR(45) NULL,
  `Наличие поддона` VARCHAR(45) NULL,
  `Глубина поддона` VARCHAR(45) NULL,
  `Количество отверстий` INT NULL,
  PRIMARY KEY (`Идентификатор модели горшка`, `Идентификатор ячейки товара на складе`),
  INDEX `fk_Горшок_Склад1_idx` (`Идентификатор ячейки товара на складе` ASC) VISIBLE,
  CONSTRAINT `fk_Горшок_Склад1`
    FOREIGN KEY (`Идентификатор ячейки товара на складе`)
    REFERENCES `mydb`.`Склад` (`Идентификатор ячейки товара на складе`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
```
**SELECT для проверки правильности построения бд и заполнения данных**
```
SELECT * FROM `Сотрудник` WHERE `Рабочий телефон` NOT LIKE '+7%' ;
SELECT * FROM `Клиент` WHERE `Идентификатор Сотрудника` != 2;
SELECT `Клиент`.`ФИО`, `Клиент`.`Идентификатор Сотрудника`, `Сотрудник`.`Фамилия`  
FROM `Клиент`, `Сотрудник` WHERE `Клиент`.`Идентификатор Сотрудника`= `Сотрудник`.`Идентификатор Сотрудника`;
```
</details>